{"version":3,"sources":["Components/SJTUnit/SJT.js","Components/SJTUnit/NoteInfoGenerator.js","Components/SJTUnit/createSquaresNotes.js","Components/SJTUnit/SJTUnit.js","Components/Overlay/Overlay.js","App.js","registerServiceWorker.js","index.js"],"names":["permute","arr","N","length","directions","indices","push","i","result","res","makeResult","join","maxIndex","moveTo","undefined","j","tmp","swap","all","generator","next","module","exports","NoteInfoGenerator","noteArray","iterator","arguments","generation","generationIndex","Object","classCallCheck","this","note","scaleSize","iteration","parseInt","noteInfo","getNoteInfo","increment","creatorFunction","initialIteration","noteLength","callback","elementName","blockColour","scaleRootNote","scaleKey","scaleOctave","synth","Tone","PolySynth","toMaster","totalRects","arrayNoteNames","degreeList","key","rootNote","octave","scale","scaleLength","Scale","notes","concat","Math","max","apply","toConsumableArray","newScale","numTimes","floor","String","map","index","generateScaleArray","synthVoice","arrayOfNotes","notesToPermute","incrementalArray","data","notePermutations","generateSynthVoice","initialScaleNoteNames","konvaWidth","document","getElementById","offsetWidth","konvaHeight","offsetHeight","stage","Konva","Stage","container","width","height","layer","Layer","availableRects","Rect","x","y","fill","opacity","add","addTween","tween","Tween","node","easing","Easings","EaseOut","duration","onFinish","reverse","Loop","time","playNote","triggerAttackRelease","play","SJTUnit","props","_this","possibleConstructorReturn","getPrototypeOf","call","setDefaultLoopState","setState","loopState","rooteNote","noteArrayString","loopStop","loop","loopPlaying","stop","loopStart","start","createLoop","stuff","noteString","loopCreated","processedNotes","split","filter","Number","isInteger","console","log","createNotesAndSquares","loopData","konvaIdName","clearLoop","createDefaultLoop","eventHandler","e","eventId","target","id","eventValue","value","writeToState","stateKey","valueToWrite","prevState","objectSpread","defineProperty","state","scaleInfo","buttons","_this2","react_default","a","createElement","className","onClick","type","name","placeholder","onChange","pattern","size","defaultValue","valye","externalFunction","React","Component","componentClasses","Overlay","hide","href","defaultTempo","defaultVolume","minVolume","App","addSJT","arrayOfIndexes","invertState","stateArray","removeFromArray","splice","addToArray","testFunction","setBpm","tempoValue","currentState","difference","abs","isFinite","Transport","bpm","rampTo","setVolume","volumeValue","parseFloat","Master","mute","muted","volume","convertRange","r1","r2","colours","Components_Overlay_Overlay","style","background","Components_SJTUnit_SJTUnit","lib_default","orientation","min","tooltip","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","error","ReactDOM","render","src_App_0","URL","process","origin","addEventListener","fetch","response","status","headers","get","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.36e330dc.chunk.js","sourcesContent":["function permute(arr) {\n\n    var N = arr.length;\n    var directions = [];\n    var indices = [];\n\n    directions.push(0);\n    indices.push(0);\n    for (var i = 1; i < N; i += 1) {\n        directions.push(-1);\n        indices.push(i);\n    }\n\n    function swap(i, j) {\n        var tmp = indices[i];\n        indices[i] = indices[j];\n        indices[j] = tmp;\n\n        tmp = directions[i];\n        directions[i] = directions[j];\n        directions[j] = tmp;\n    }\n\n    function result() {\n        var res = [];\n        for (var i = 0; i < N; i += 1) {\n            res.push(arr[indices[i]]);\n        }\n        return res;\n    }\n\n    var makeResult = typeof arr !== 'string' ? result : function () {\n        return result().join('');\n    };\n\n    return function () {\n        var i, maxIndex, moveTo;\n        for (i = 0; i < N; i += 1) {\n            if (directions[i] !== 0) {\n                maxIndex = i;\n                break;\n            }\n        }\n        if (maxIndex === undefined) {\n            return undefined;\n        }\n        for (i = maxIndex + 1; i < N; i += 1) {\n            if (directions[i] !== 0 && indices[i] > indices[maxIndex]) {\n                maxIndex = i;\n            }\n        }\n        moveTo = maxIndex + directions[maxIndex];\n        swap(maxIndex, moveTo);\n        if (moveTo === 0 || moveTo === N - 1 || indices[moveTo + directions[moveTo]] > indices[moveTo]) {\n            directions[moveTo] = 0;\n        }\n        for (i = 0; i < N; i += 1) {\n            if (indices[i] > indices[moveTo]) {\n                if (i < moveTo) {\n                    directions[i] = 1;\n                } else {\n                    directions[i] = -1;\n                }\n            }\n        }\n        return makeResult();\n    };\n};\n\npermute.all = function (arr) {\n    var generator = permute(arr);\n    var next = arr;\n    var result = [];\n    while (next !== undefined) {\n        result.push(next);\n        next = generator();\n    }\n    return result;\n};\n\nmodule.exports = permute;\n","/*\n\nA class that handles iterating over array indexes of the Steinhaus-Johnson-Trotter algorithm\n\n*/\n\nexport default class NoteInfoGenerator {\n\n  /*\n  PROPERTIES:\n\n  noteArray = array of notes constructed using SJT.js\n  iterator = iterator for the number of notes traversed\n  generation = number of permutation to return\n  generationIndex = index within the permutation we are referencing\n  note = note we are referenceing (noteArray[generation][generationIndex])\n  scaleSize = number of entries in a scale, used to work out generation\n  maxIndex = maximum index of the array. At present this is calculated dumbly, just by mutiplying the length of the two levels of the array. TODO: This could be done by using a flattening function later\n\n  */\n  constructor(noteArray, iterator = 0, generation = 0, generationIndex = 0, scaleSize = 0) {\n    this.noteArray = noteArray;\n    this.iterator = iterator;\n    this.generation = generation;\n    this.generationIndex = generationIndex;\n    this.note = this.noteArray[this.generation][this.generationIndex];\n    this.scaleSize = noteArray[0].length;\n    this.maxIndex = this.noteArray.length * this.noteArray[0].length\n  }\n\n  //returns all relevant information as an object\n  getInfo() {\n    return {\n      iteration: this.iterator,\n      generation: this.generation,\n      generationIndex: this.generationIndex,\n      note: this.note,\n      scaleSize: this.scaleSize\n    }\n  }\n\n  //increments ONLY, does not return information, also checks to make sure the iteration isn't over the maximum. The maximum is only calculated once in the constructor so that it's not calculated multiple times to save on power\n  increment() {\n    this.iterator++;\n    if (this.iterator >= this.maxIndex) {\n      this.iterator = 0;\n    }\n  }\n\n  //returns an object of information about the current note, then moves onto the next generation\n  getNoteInfo() {\n\n    //get size of scale and use it to work out how many generations have elapsed\n    this.generation = parseInt(this.iterator/this.scaleSize, 10);\n    this.generationIndex = this.iterator%this.scaleSize;\n    this.note = this.noteArray[this.generation][this.generationIndex]\n\n    //return all of the relevant information to be used later on by the visuals side.\n    return {\n      iteration: this.iterator,\n      generation: this.generation,\n      generationIndex: this.generationIndex,\n      note: this.note\n    }\n  }\n\n  getInformation() {\n    return {\n      iteration: this.iterator\n    }\n  }\n\n  //there's probably a better way to do this but this will return note values as an object AND increment the iterator.\n  playNote() {\n    const noteInfo = this.getNoteInfo();\n    this.increment()\n    return noteInfo\n  }\n}\n","\n//TODO: Chromatic scale doesn't work.\n//Class for generating notes\nimport NoteInfoGenerator from \"./NoteInfoGenerator.js\";\nimport Tone from 'tone';\nimport permute from './SJT.js';\nimport Konva from 'konva';\nimport {Scale} from 'tonal';\n\n//callback function added in order to pass information out of scope that allows animation\n//After the callback there are attributes which will determine the colour of block to animate\n/*\n\nnoteArray = Array of indices inputted at the start\ninitialIteration = Initial note number. Not sure if this is needed\nnoteLength = Length of the notes fed to createAttackRelease\ncallback = function used to pass data out of this component and be read by the SJTUnit component\nelementName = id of div to create konva canvas onto\nblockColour = colour of blocks to be drawn behind the SJTUnit informarion\nscaleRootNote = Root note of scale to be used in Tonal scale generation (where previously indices were used)\nscaleKey = Key of scale to be used in Tonal scale generation\nscaleOctabe = Octave of scale to be used in Tonal scale generation\n\n*/\nconst creatorFunction = (noteArray = [0,3,7,12], initialIteration = 0, noteLength = '4n', callback, elementName = \"konva-test\", blockColour = \"#FFFFFF\", scaleRootNote = \"C\", scaleKey=\"minor\", scaleOctave=\"4\") => {\n\nvar synth = new Tone.PolySynth().toMaster();\nconst totalRects = noteArray.length;\n\n//Function to turn a degree list, key, root note and octave into a sorted array of notes.\nconst generateScaleArray = (degreeList = [0, 1, 4, 8], key = \"minor\", rootNote = \"C\", octave = \"4\") => {\n  //Holding values for a scale (empty array to allow .concat method) and a final value\n  let scale = [], indexedScale;\n  //Returns how many degrees are in the scale to see how many octaves need to be generated\n  const scaleLength = Scale.notes(`${rootNote}${octave} ${key}`).length\n  //See which octave boundaries degrees fall into\n  const maxIndex = Math.max(...degreeList);\n  //If statement which either generates one octave or generates multiple octaves.\n  if (maxIndex < scaleLength) {\n    scale = Scale.notes(`${rootNote}${octave} ${key}`)\n  } else {\n    //Get the number of octaves to generate, this is +1 as it is zero-indexed\n    let numTimes = Math.floor(maxIndex/scaleLength)+1;\n    //holding value for generated scales to be concatenated onto the empty `scale` array\n    let newScale;\n    //Work out if more scales are needed, and generate them accordingly, appending them to the empty `scale` variable\n    for(let i=0; i<=numTimes; i++) {\n      newScale = Scale.notes(`${rootNote}${String(parseInt(octave, 10)+i)} ${key}`);\n      scale = scale.concat(newScale);\n    }\n  }\n  //Select which indexes of the generated scale list needs to be returned in the final processed array\n  indexedScale = degreeList.map(index => scale[index])\n  return(indexedScale)\n}\n\n\n\n//Function to permute available notes\nconst permuteNotes = (notesToPermute) => {\n  return permute.all(notesToPermute)\n}\n\n//TODO: Make this permutation function possibly generate two arrays which can be cross-referenced in parallel to generate correct visuals.\n//USE A SJT ARRAY AND THEN JUST USE THAT TO REFERENCE THE ARRAY SOMEHOW.\n//This function generates a SEQUENTIAL ARRAY, and then performs STEINHAUS-JOHNSON-TROTTER on it.\n//This will then be cross-referenced against an array of note values to play them, as well as used as direct reference to trigger visuals\nconst generateSynthVoice = (arrayOfNotes, initialIteration) => {\n  const incrementalArray = arrayOfNotes.map((data,i) => i)\n  const notePermutations = permuteNotes(incrementalArray);\n  const player = new NoteInfoGenerator(notePermutations, initialIteration);\n  return player\n}\n\n//This generates an array of note names. These will be referenced within the tonejs timing loop\nconst arrayNoteNames = generateScaleArray(noteArray, scaleKey, scaleRootNote, scaleOctave)\n//generate an array of synths to be used\nlet synthVoice = generateSynthVoice(arrayNoteNames, initialIteration)\n//add the initial scale by  note name to the SynthVoice object\nsynthVoice.initialScaleNoteNames = noteArray.map((data, i) => arrayNoteNames[i])\n\n\nconst konvaWidth = document.getElementById(elementName).offsetWidth;\nconst konvaHeight = document.getElementById(elementName).offsetHeight;\n\nconst stage = new Konva.Stage({\n  container: elementName,\n  width: konvaWidth,\n  height: konvaHeight\n});\n\nconst layer = new Konva.Layer();\n\nlet availableRects = [];\n\n\n//THIS IS MESSY - Needs to be abstracted out into a function.\n\nfor(let i=0; i<totalRects; i++){\n  availableRects.push(new Konva.Rect({\n    x: (konvaWidth/totalRects*i),\n    y: 0,\n    width: (konvaWidth/totalRects),\n    height: konvaHeight,\n    fill: blockColour,\n  opacity: 0.05}))\n}\n\n//A for loop to create rectangles and add tweening animations to them.\nfor (let i=0; i<totalRects; i++) {\n  layer.add(availableRects[i])\n  }\n\n  //a function   to add a tween to a square. This needed to be created in order to get availableRects correctly assigned.\n  //This could do with being refactored as it's quite messy.\n  const addTween = (index, availableRects) => {\n    availableRects[index].tween = new Konva.Tween({\n    node: availableRects[index],\n    opacity: 0.8,\n    easing: Konva.Easings.EaseOut,\n    duration: 0.1,\n    onFinish: function() {\n     availableRects[index].tween.reverse()\n   }\n })\n}\n\n // this now works with the above function\n // TODO: Refactor this, it's dependent on side-effects and is quite messy\nfor (let i=0; i<totalRects; i++) {\n  addTween(i,availableRects);\n}\n\nstage.add(layer);\ncallback(synthVoice);\n\n//This is returned so that the loop can be referenced. It also triggers the rest of the loop which is in scope.\nreturn (\n  [new Tone.Loop(function(time){\n    synthVoice.playNote();\n    //uses the master SJT array to refer to notes by index against an array of note names generated earlier.\n    synth.triggerAttackRelease(arrayNoteNames[synthVoice.note], noteLength)\n    availableRects[synthVoice.note].tween.play();\n    //console log synthVoice for debugging if needed\n    synthVoice.note = arrayNoteNames[synthVoice.note];\n    callback(synthVoice)\n}, noteLength), synthVoice]\n)\n}\n\nexport default creatorFunction\n","/*\n\nThis component returns a div that has:\n\n- A loop, determined by the props provided\n- A button, which stops and starts the loop\n- Some sets of text which display information about the loop.\n- A slider, which can be used to set the initial pitch\n- A text field, which takes a space delimited string of integers which will be turned into an array and be used as notes to go through the Steinhaus johnson trotter algorithm\n\nThis needs to broken out into components.\n\n\n*/\n\n\nimport React from 'react';\n//class to generate loop of notes\nimport createNotesAndSquares from \"./createSquaresNotes.js\";\n//Steinhaus Johnson Trotter permutation algorithm\nimport './SJT.js';\n//stylesheet for buttons\nimport './SJTUnit_Styles.css';\nimport '../../sliderstyles.css';\n\n\nclass SJTUnit extends React.Component {\n\n  constructor(props) {\n    super(props);\n    /*\n    properties of state:\n\n    loopCreated = has a loop been created? Used for conditional rendering of buttons\n\n    */\n    this.state = {\n      loopCreated: false,\n      //loopState is added in order to initialise values that will later be used to create a loop\n      loopState: {\n        noteArray: [0,2,3,5,7,12],\n        initialIteration: 0,\n        noteLength: \"4n\",\n        rooteNote: \"C\",\n        scaleKey: \"minor\",\n        octave: 4\n      },\n      //This will be added as a string then converted into noteArray on creation\n      noteArrayString: \"0 4 7\",\n      //Is the loop playing?\n      loopPlaying: false,\n      //placeholder for loop data fed out of createSquaresNotes callback function\n      loopData: {\n        generation: 0,\n        generationIndex: 0,\n        iterator: 0,\n        maxIndex: 600,\n        note: 0,\n        noteArray: [0,0,0],\n        scaleSize: 5\n      },\n      //updated scale information sent from createSquaresNotes\n      scaleInfo: [\"C\"],\n    }\n  }\n\n  setDefaultLoopState = () => {\n    this.setState({\n      loopState: {\n        noteArray: [0,2,3,5,7,12],\n        initialIteration: 0,\n        noteLength: \"4n\",\n        rooteNote: \"C\",\n        scaleKey: \"minor\",\n        octave: 4\n      },\n      //This will be added as a string then converted into noteArray on creation\n      noteArrayString: \"0 4 7\"\n    })\n  }\n\n  loopStop = (loop) => {\n    this.setState({loopPlaying: false})\n    loop.stop(0)\n  }\n\n  loopStart = (loop) => {\n    loop.start(\"@1m\")\n    this.setState({loopPlaying: true})\n  }\n\n  //This is a function which takes an object containing properties of the SJT loop to be created. This is then created using createNotesAndSquares, old version.\n  //TODO: See if this can interrupt processing and re-spawn the input field\n  createLoop = (stuff = {\n    noteArray: [0,2,5,7,12],\n    initialIteration: 0,\n    noteLength: \"4n\",\n    rooteNote: \"C\",\n    scaleKey: \"minor\",\n    octave: 4\n  }, noteString = \"0 2 5 7 12\") => {\n    this.setState({loopCreated: true});\n\n    //this splits the array, then converts the whole array to integers\n    const newNoteString = noteString.split(\" \")\n    const intNoteString = newNoteString.map(x => parseInt(x, 10));\n    /*\n    Processes the notes: Checks if:\n    - Rejects strings\n    - Rejects negative integers\n    - Rejects integers over 30\n    */\n    const processedNotes = intNoteString.filter((data) => {\n      if (Number.isInteger(data) && data >= 0 && data < 30) {\n        return true\n      }\n    })\n    console.log(processedNotes)\n\n    return(\n    createNotesAndSquares(\n      processedNotes,\n      stuff.initialIteration,\n      stuff.noteLength,\n      //callback function that handles data\n      (data) => {\n        //an array is put out through the callback function. One will be the loop data and on\n        this.setState({loopData: data});\n      },\n      //element name\n      this.props.konvaIdName,\n      //blockColour\n      '#e0e0e0',\n      stuff.rootNote,\n      stuff.scaleKey,\n      stuff.octave\n    )\n  )\n  }\n\n  clearLoop = () => {\n    //This will make the state remove the relevant buttons from the DOM.\n    this.setState({loopCreated: false});\n    this.setDefaultLoopState();\n  }\n\n  //for testing\n  createDefaultLoop = (stuff) => {\n    console.log(\"bang\")\n    return(\n    createNotesAndSquares()\n  )\n  }\n\n  //NOTE: This is dependent upon side-effects and could do with Redux integration\n  eventHandler = (e) => {\n    const eventId = e.target.id;\n    const eventValue = e.target.value;\n    //A holder for stateKey so that the writeToState function can be called at the end of the function rather than for each case\n    let stateKey;\n\n    //TODO: This doesn't work, why?\n    const writeToState = (stateKey, valueToWrite) => {\n      //\n      this.setState(prevState => ({\n        loopState: {\n        ...prevState.loopState,\n        //writes state key and value to previous loopState value\n        [stateKey]: valueToWrite\n      }\n      }))\n    }\n\n    switch(eventId) {\n      case \"scaleKey\":\n        stateKey = \"scaleKey\";\n        writeToState(stateKey, eventValue)\n        break;\n      case \"scaleOctave\":\n        stateKey = \"octave\"\n        writeToState(stateKey, eventValue)\n        break;\n      case \"scaleRoot\":\n        stateKey = \"rootNote\"\n        writeToState(stateKey, eventValue)\n        break;\n      case \"noteLength\":\n        stateKey = \"noteLength\"\n        writeToState(stateKey, eventValue)\n        break;\n      case \"scaleIndices\":\n        this.setState({noteArrayString: eventValue});\n        break;\n      default:\n        return true;\n    }\n\n  }\n\n  render() {\n    let buttons ;\n\n    if (this.state.loopCreated) {\n      buttons = (\n        <div className=\"createdLoopLayout\">\n          <div className=\"createdLoopButtonContainer center-contents\">\n          {\n          !this.state.loopPlaying ? <a className=\"SJTUnitButton createdLoopButton center-contents\" onClick={() => this.loopStart(this.loop[0])}>Play Loop</a> : <a className=\"SJTUnitButton createdLoopButton center-contents\" onClick={() => this.loopStop(this.loop[0])}>Stop Loop</a>\n              }\n            </div>\n            <div className=\"createdLoopButtonContainer center-contents\">\n        <a className=\"SJTUnitButton createdLoopButton center-contents\" onClick={() => {\n          this.loopStop(this.loop[0]);\n          this.clearLoop()\n        }}>Clear Loop</a>\n      </div>\n        <div className=\"loopInformation\">\n          <span>Note: {this.state.loopData.note}</span>\n          <span>Scale: {String(this.state.loopData.initialScaleNoteNames)}</span>\n          <span>Note Number: {this.state.loopData.iterator}</span>\n          <span>Generation: {`${this.state.loopData.generation+1}/${this.state.loopData.noteArray.length}`}</span>\n          <span>Total Number of Notes: {this.state.loopData.maxIndex}</span>\n        </div>\n        </div>\n      )\n    } else {\n      buttons = (\n        <div className=\"loopCreationLayout\">\n          {/* The button is created using loopState as it is when the button is pressed */}\n          <div className=\"dataInputUnit center-contents\">\n          <label>\n            {`Indices: `}\n            <div>\n            <input type=\"text\" name=\"indices\" placeholder=\"Default: 0 4 7\" onChange={this.eventHandler} id=\"scaleIndices\" pattern=\"(\\d{1,2}\\s){1,6}\" size=\"10\"/>\n            </div>\n          </label>\n        </div>\n\n        <div className=\"scale-dropdown-menus\">\n\n        <div className=\"dropdown-layout center-contents\">\n          <label>\n            {`Root: `}\n            <div>\n            <select defaultValue=\"C\" onChange={/*this.setRoot*/ this.eventHandler} id=\"scaleRoot\">\n              <option value=\"A\">A</option>\n              <option value=\"Bb\">Bb</option>\n              <option value=\"B\">B</option>\n              <option value=\"C\">C</option>\n              <option value=\"C#\">C#</option>\n              <option value=\"D\">D</option>\n              <option value=\"Eb\">Eb</option>\n              <option value=\"E\">E</option>\n              <option value=\"F\">F</option>\n              <option value=\"F#\">F#</option>\n              <option value=\"G\">G</option>\n              <option value=\"G#\">G#</option>\n            </select>\n            </div>\n          </label>\n        </div>\n\n        <div className=\"dropdown-layout center-contents\">\n          <label>\n            {`Octave: `}\n            <div>\n            <select defaultValue=\"4\" onChange={/*this.setOctave*/ this.eventHandler} id=\"scaleOctave\">\n              <option value=\"2\">2</option>\n              <option value=\"3\">3</option>\n              <option value=\"4\">4</option>\n              <option value=\"5\">5</option>\n              <option value=\"6\">6</option>\n            </select>\n            </div>\n          </label>\n        </div>\n\n        <div className=\"dropdown-layout center-contents\">\n          <label>\n            {`Key: `}\n            <select defaultValue=\"minor\" onChange={/*this.setScaleKey*/ this.eventHandler} id=\"scaleKey\">\n              <option value=\"major\">Major</option>\n              <option value=\"minor\">Minor</option>\n              <option valye=\"dorian\">Dorian</option>\n              <option value=\"mixolydian\">Mixolydian</option>\n              <option value=\"chromatic\">Chromatic</option>\n            </select>\n          </label>\n        </div>\n\n\n          <div className=\"dropdown-layout center-contents\">\n          <label>\n          {`Duration:    `}\n          <div>\n            <select defaultValue=\"4n\" onChange={/*this.setNoteLength*/ this.eventHandler} id=\"noteLength\">\n              <option value=\"2n\" >1/2</option>\n              <option value=\"4n\">1/4</option>\n              <option value=\"8n\">1/8</option>\n              <option value=\"16n\">1/16</option>\n            </select>\n            </div>\n          </label>\n        </div>\n      </div>\n\n          <div className=\"dataInputUnit center-contents flow-table\">\n          <a className=\"SJTUnitButton center-contents\" onClick={() => {this.loop = this.createLoop(this.state.loopState, this.state.noteArrayString)}}>Create Loop</a>\n          <a className=\"SJTUnitButton center-contents\" onClick={this.props.externalFunction}> Remove Loop </a>\n        </div>\n        </div>\n      )\n    }\n\n  return (\n    <div className=\"buttonHolder\" >\n      {/* This could be extracted out into a play/stop button. */}\n      {buttons}\n    </div>\n  )\n}\n}\n\nexport default SJTUnit\n","import React from 'react'\nimport './Overlay.css'\n\n\nconst componentClasses = ['overlay-styling'];\n\nclass Overlay extends React.Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {hide: false}\n  }\n\n  //Setting up CSS transitions for the overlay, using the class show to push an opacity level to overlay-styling\n\n\n  render() {\n\n  if (this.state.hide) {componentClasses.push('hide')};\n\n  return (\n    <div className={componentClasses.join(' ')}>\n      <div className=\"overlayText\">\n       <h1>Steinhaus-Johnson-Trotter Web</h1>\n\n       <p>This is a four-channel change-ringing simulator, built using <a href=\"https://reactjs.org/\">Reactjs</a>, <a href=\"https://konvajs.github.io/\">Konva</a> <a href=\"https://tonejs.github.io/\">Tonejs</a> and the <a href=\"https://github.com/danigb/tonal\">Tonal</a> library.</p>\n\n       This is best viewed on a laptop/desktop computer\n\n       <h3>How to use</h3>\n\n       <ol>\n         <li>On one of the fields click 'Initialise Loop'</li>\n         <li>Enter the degrees of the scale you wish to use as a pattern (with 0 being the root note of the scale), separated by spaces (e.g. 0 2 4 7) - Up to eight values are permitted</li>\n         <li>Choose a scale root, octave, key and note duration (optional)</li>\n         <li>Click 'Create Loop', which applies Steinhaus-Johnson-Trotter permutations to your sequence</li>\n         <li>Click 'Play Loop' to hear the playback of the permuted sequence, and see visualisation of that sequence </li>\n      </ol>\n\n\n      <ul>\n      <li>Loops can be removed with the 'Clear Loop' button</li>\n      <li>Tempo and Volume can be changed using the sliders below the loop fields</li>\n    </ul>\n\n       <h3>Known Issues</h3>\n\n       <ul>\n       <li>Tempo changes can cause playback of loops to stop working</li>\n       <li>Any negative numbers, text and numbers over 30 will be silently rejected from input</li>\n       <li>Changing the dimensions of the browser will not change the dimensions of visuals</li>\n       <li>Sequences are limited to eight notes to prevent crashes from enormous datasets</li>\n     </ul>\n\n\n     <h3>About the Steinhaus-Johnson-Trotter Algorithm</h3>\n\n       <p>The Steinhaus–Johnson–Trotter algorithm or Johnson–Trotter algorithm, also called plain changes, is an algorithm named after Hugo Steinhaus, Selmer M. Johnson and Hale F. Trotter that generates all of the permutations of n elements. Each permutation in the sequence that it generates differs from the previous permutation by swapping two adjacent elements of the sequence.</p>\n\n       <p>Outside of mathematics, the same method was known for much longer as a method for change ringing of church bells: it gives a procedure by which a set of bells can be rung through all possible permutations, changing the order of only two bells per change. These so-called \"plain changes\" were recorded as early as 1621 for four bells, and a 1677 book by Fabian Stedman lists the solutions for up to six bells.</p>\n\n       Information CC BY-SA from <a href=\"https://en.wikipedia.org/wiki/Steinhaus%E2%80%93Johnson%E2%80%93Trotter_algorithm\">Wikipedia</a>\n\n       <div className=\"bottom-alignment\">\n       <a className=\"closeButton\" onClick={() => {this.setState({hide: true})}}>Start</a>\n     </div>\n     </div>\n    </div>\n  )\n}\n}\n\nexport default Overlay\n","import React, { Component } from 'react';\nimport './App.css';\n//Styling imported, ported from old project\nimport './stylesheet.css'\n//buttons\nimport './buttons.css'\n//components\nimport SJTUnit from \"./Components/SJTUnit/SJTUnit\"\nimport Tone from 'tone'\n//Import enhanced range slider\nimport Slider from 'react-rangeslider'\n//import overlay that explains the app\nimport Overlay from \"./Components/Overlay/Overlay\"\n//Custom stylesheet for Slider - Makes the slider smaller to better sit underneath loop generators.\nimport './sliderstyles.css'\n\n\n/*\n\nTODO:\n\n- Input formatting: This can be done by using a regex.\n- The correct regex is: (\\d{1,2}\\s){1,6}\n- Change the colour of links once already clicked\n\nSCALES:\n- Make a 'normal' and 'advanced' mode dropdown.\n  - Normal has major/minor/chromatic, octave\n  - Advanced has a whole bunch more, octave, transposition.\n  - Add the Tizita scale (request from HB)\n  \n- Currently all negative integers are rejected. These could be accepted.\n- createSquaresNotes and SJTUnit need rewriting, they're getting very messy\n- Mute doesn't work\nx Change of tempo can stop loops working for some reason.\n  - Some loops will inexplicably not work.\n  - THIS COULD BE SOLVED BY MAKING TEMPO CHANGES ONLY HAPPEN ON RELEASE\n*/\n\n//This works to stop the transport\nconst startPlaying = () => {\n  Tone.Transport.start(\"+0.1\");\n}\n\n/*\nA default tempo value.\n\nTODO: Perhaps this isn't the best way to do this, starting with a hardcoded value, but it works for now.\n*/\n//Some values that are used in tempo and bpm calculation\nconst defaultTempo = 60;\nconst defaultVolume = -3;\nconst minVolume = -40;\n\nclass App extends Component {\n\n  constructor (props) {\n    super(props);\n    this.state = {\n      //Booleans control whether loops are activated or not\n      arrayOfIndexes: [false , false, false, false],\n      //inherits from global variable\n      tempoValue: defaultTempo,\n      //inherits from global variable\n      volume: defaultVolume,\n      //Four colours taken from color scheme site.\n      colours: [\"rgba(71, 151, 97, 0.5)\",\n      \"rgba(161, 110, 131, 0.5)\",\n      \"rgba(206, 188, 129, 0.5)\",\n      \"rgba(177, 159, 158, 0.5)\" ],\n      muted: false\n    }\n  }\n\n  //Function to add a SJT component. Not used\n  addSJT = () => {\n    this.setState((state, props) => {\n      return {arrayOfIndexes: state.arrayOfIndexes.push(true)}\n    })\n  }\n\n  //Function to invert a boolean of a particular index of the state array\n  invertState = (index) => {\n    let stateArray = this.state.arrayOfIndexes;\n    stateArray[index] = !stateArray[index];\n    this.setState({arrayOfIndexes: stateArray})\n  }\n\n  //Function to remove a particular index of a state array.\n  removeFromArray = (index) => {\n    let stateArray = this.state.arrayOfIndexes;\n    stateArray = stateArray.splice(index,1)\n    this.setState({arrayOfIndexes: stateArray})\n  }\n\n  //Function to add an index to the end of the state array.\n  addToArray = (index) => {\n    let stateArray = this.state.arrayOfIndexes;\n    stateArray = stateArray.push(true);\n    this.setState({arrayOfIndexes: stateArray})\n  }\n\n\n  testFunction = (index) => {\n    console.log(\"works\", index);\n  }\n\n\n\n  //function to set the bpm of  the transport and apply it to state to be printed to the page.\n  //TODO: A LOT of errors that are: \"Failed to execute 'setValueAtTime' on 'AudioParam': The provided float value is non-finite.\"\n  //This is now deprecated in favour of using react-input-range component grabbed from npm.\n  setBpm = (e) => {\n    let tempoValue;\n    if (typeof(e) === 'object') {\n      //parse the target value object\n      tempoValue = parseInt(e.target.value, 10)\n    } else if (typeof(e) === 'number') {\n      //directly assign the target value object\n      tempoValue = parseInt(e, 10)\n    }\n    const currentState = this.state.tempoValue;\n    const difference = Math.abs(tempoValue - currentState);\n    //check if value is finite\n    if (isFinite(tempoValue)) {\n    //Check the difference in the values. If it's more than 2, it's a good idea to ramp it.\n    if(difference <= 2) {\n      //no ramp\n      Tone.Transport.bpm.value = tempoValue;\n      this.setState({tempoValue: tempoValue});\n    } else if (difference < 10) {\n      //ramp\n      this.setState({tempoValue: tempoValue});\n      Tone.Transport.bpm.rampTo(tempoValue,difference/50)\n    } else {\n      this.setState({tempoValue: tempoValue});\n      Tone.Transport.bpm.rampTo(tempoValue,1)\n    }\n  }\n  }\n\n  setVolume = (e) => {\n    let volumeValue\n    if (typeof(e) === 'object') {\n      //parse the target value object\n      volumeValue = parseFloat(e.target.value)\n    } else if (typeof(e) === 'number') {\n      //directly assign the target value object\n      volumeValue = parseFloat(e, 10)\n    }\n    if (isFinite(volumeValue)) {\n      if (parseInt(volumeValue, 10) === minVolume) {\n        Tone.Master.mute = true\n        this.setState({muted: true})\n      } else if (parseInt(volumeValue, 10) !== minVolume && this.state.muted === true) {\n        Tone.Master.mute = false;\n        this.setState({muted: false});\n      }\n    this.setState({volume: volumeValue})\n    //NOTE: The use of signal `.value` call is essential here.\n    //Documented here: https://github.com/Tonejs/Tone.js/wiki/Signals\n    Tone.Master.volume.rampTo(volumeValue,0.1)\n\n  }\n}\n\n\n  //Function taken from https://stackoverflow.com/questions/14224535/scaling-between-two-number-ranges to scale volume value printouts to 0-100 to be more user-accessible for people who don't know about decibels\n  convertRange = ( value, r1, r2 ) => {\n    return ( value - r1[ 0 ] ) * ( r2[ 1 ] - r2[ 0 ] ) / ( r1[ 1 ] - r1[ 0 ] ) + r2[ 0 ];\n  }\n\n  componentDidMount() {\n    startPlaying();\n    //set default tempo and volume values\n    Tone.Transport.bpm.value = defaultTempo;\n    Tone.Master.volume.value = defaultVolume\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        {/* Component rendering an infobox upon opening then page  */}\n          <Overlay />\n\n        {\n          this.state.arrayOfIndexes.map((data, i) => {\n            if (!data) {\n              return(\n                //This returns a div with a button asking whether you want to initialise a loop\n              <div className=\"div-styling center-contents\" key={i} style={{background: this.state.colours[i]}}>\n                <a className=\"initialiseButtonStyling initialiseButton center-contents\" onClick={() => this.invertState(i)}>Initialise Loop {i+1}</a>\n              </div>\n          )\n            } else {\n              return (\n                //This returns a div contaning an SJTUnit component, which is wrapped in a div which will be used to generate Konva squares. The ID of the konva div will then be passed into the SJTUnit, which will be passed into the creation argument of createSquaresNotes. This passing-down can probably be done better, but will be tackled during a refactor.\n                <div className=\"div-styling\" style={{background: this.state.colours[i]}} >\n\n                <div className=\"konva-container\" id={`konva-${i}`}>\n                </div>\n                  <div className=\"SJTUnit-container\" key={i} >\n                    <SJTUnit key={i} externalFunction={() => this.invertState(i)} konvaIdName={`konva-${i}`}/>\n                  </div>\n                </div>\n\n              )\n            }\n          })\n        }\n\n        {/* This could do with being extracted out */}\n        <div className=\"slidersDiv\" >\n          <div className=\"slider\">\n          <p className=\"sliderTitle\">Tempo: {this.state.tempoValue}</p>\n       <Slider\n        value={this.state.tempoValue}\n        orientation=\"horizontal\"\n        onChange={value => this.setBpm(value)}\n        min={40}\n        max={100}\n        tooltip={false}\n      />\n        </div>\n        <div className=\"slider\">\n          <p className=\"sliderTitle\">{`Volume: `}\n{parseInt(this.convertRange(this.state.volume,[minVolume,0],[0,100]), 10)} </p>\n          <Slider\n            orientation=\"horizontal\"\n            onChange={value => this.setVolume(value)}\n            value={this.state.volume}\n            min={-40}\n            max={0}\n            tooltip={false} />\n        </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\nregisterServiceWorker();\n"],"sourceRoot":""}